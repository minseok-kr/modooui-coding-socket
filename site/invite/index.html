<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <meta name="description" content="">
    <meta name="author" content="">
    <link rel="icon" href="../../favicon.ico">

    <title>모두의 코딩</title>

    <!-- Just for debugging purposes. Don't actually copy these 2 lines! -->
    <!--[if lt IE 9]><script src="../../assets/js/ie8-responsive-file-warning.js"></script><![endif]-->
    <script src="../../assets/js/ie-emulation-modes-warning.js"></script>

    <link rel="stylesheet" href="/asset/css/bootstrap-theme.min.css">
    <link rel="stylesheet" href="/asset/css/invite.css" />
    <link rel="stylesheet" href="/asset/css/common.css" />
</head>

<body>

    <nav class="navbar navbar-expand-lg navbar-light bg-light">
        <div class="container">
            <a class="navbar-brand" href="/">모두의 코딩</a>

            <div class="mr-auto"></div>
            <div id="nav-profile">

                <img id="client-image" class="rounded-circle" src="https://lh6.googleusercontent.com/-hezxJKyrbUs/AAAAAAAAAAI/AAAAAAAAADs/tJTe8OEjjBs/photo.jpg"
                    width="30" height="30" />
                <span id="nav-client-name">박민석</span>
            </div>
        </div>
    </nav>
    <div class="container">
        <h1>초대받은 스터디</h1>

        <div class="card" id="card-room">
            <div class="card-body card-container-top">
                <img class="rounded-circle img-room" src="https://lh6.googleusercontent.com/-hezxJKyrbUs/AAAAAAAAAAI/AAAAAAAAADs/tJTe8OEjjBs/photo.jpg" />
            </div>
            <div class="card-body">
                <h5 class="card-title" id="txt-card-title">오늘만 하는 스터디</h5>
                <p class="card-text" id="txt-card-content">이것도 하고 저것도 하고 요것도 하고</p><br />
                <button id="btn_join" class="btn btn-lg btn-success">들어가기</button>
            </div>
        </div>
    </div>




    <!-- Bootstrap core JavaScript
================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
    <script>
        $(function () {
            $('#card-room').hide();
            $('#btn_join').addClass('m-progress');

            var pathname = window.location.pathname;
            paths = pathname.split('/');
            inviteCode = paths[paths.length - 1];
            $.post('/api/invite/check', { code: inviteCode }, function (data) {
                if (data) {
                    console.log("적 " + JSON.stringify(data))
                    $('#txt-card-title').html(data.name)
                    $('#txt-card-content').html(data.desc)
                    $('#card-room').show();

                    $('#btn_join').removeClass('m-progress');
                    $('#btn_join').click(function () {
                        window.location.href = "/client?" + data.room;
                    })
                }
            }).fail(function () {
                window.location.href = '/invite/error.html'
            })
        });

    </script>
</body>

</html>